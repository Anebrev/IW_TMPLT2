<!DOCTYPE html>
<head>
   <title>{%form_title%}</title>           
   <link rel="stylesheet" href="../wwwroot/custom/css/cet.css">
   <!-- DataTables -->
   <link rel="stylesheet" href="../wwwroot/MatAdmLTE/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
   <link rel="stylesheet" href="../wwwroot/MatAdmLTE/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
   <link rel="stylesheet" href="../wwwroot/MatAdmLTE/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">


   <link rel="stylesheet" href="../wwwroot/MatAdmLTE/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
   
   <!--link rel="stylesheet" href="../wwwroot/marcio/bower_components/bootstrap/dist/css/bootstrap.min.css"-->
   <!--link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css"-->
   <!--link rel="stylesheet" href="../wwwroot/marcio/bower_components/Ionicons/css/ionicons.min.css">
   <link rel="stylesheet" href="../wwwroot/marcio/bower_components/jvectormap/jquery-jvectormap.css">   			
   <link rel="stylesheet" href="../wwwroot/marcio/bower_components/bootstrap-daterangepicker/daterangepicker.css">
   <link rel="stylesheet" href="../wwwroot/marcio/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
   <link rel="stylesheet" href="../wwwroot/marcio/plugins/timepicker/bootstrap-timepicker.min.css">
   <link rel="stylesheet" href="../wwwroot/marcio/bower_components/select2/dist/css/select2.min.css"-->
   <!--link rel="stylesheet" href="../wwwroot/marcio/dist/css/AdminLTE.min.css"  ****testar***   --> 
   <!--link rel="stylesheet" href="../wwwroot/marcio/dist/css/skins/_all-skins.min.css"-->   

    <style>

        .hasChange {
            /*background: #fc5421;  */
            /*background-image: linear-gradient(to bottom right, red, pink, tomato);*/
            background-image: linear-gradient(to bottom right, rgb(255, 246, 246), rgb(255, 244, 244), rgb(255, 169, 154));                                  
        }


        #divInline {
	        /*width: 40px;*/
          /*height: 100px;*/
          display: inline-block;    
        }        

        
        #divInfo {
	        background-color: rgb(0, 188, 212);
          color: white;

          display: inline-block;    
          padding: 3px;
        }        

        #divDanger {
	        background-color:tomato;
          color: white;

          display: inline-block;    
          padding: 3px;
        }  




#fitPad{
	padding-left: 1px; 
	padding-right: 1px;
    padding-bottom: 1px;
    padding-top: 1px;
	text-align: center;
    vertical-align: middle;
    font-size: 12px;
}

.thBlue  {
    /*background-color: rgb(110, 119, 238);    */
    background-color: rgba(119, 125, 219, 0.836);    

}

.reservation__fontcolor tr th{
    color: white;
}

#white {
  color: azure;
}




    </style>
</head>
<body>
    


    <br>
    {%Step_ProgressBar%}

    
    <!--table> 
        <tr>
            <td> <a href="javascript: fncExecutar('ProcDataTable', 0);"> Processa DataTable</a> </td>
            <td> <a href="javascript: fncExecutar('ProcDataTable_json', 0);"> Processa DataTable JSON</a> </td>
        </tr>
    </table-->

   
    










    
    <div class="row">
        <div class="col-12">               
            <div class="card">
                <div class="card-header"> <!--h3 class="card-title">DataTable with default features</h3-->
                  <div id="divInfo">340 Preços regsitrados</div>
                  <div id="divDanger"><strong>126</strong> Alterações de preços em grupos</div>                  
                  <div id="divInline">
                    <!--div class="icheck-primary d-inline">
                      <input type="checkbox" id="checkboxPrimary1" unchecked>
                      <label for="checkboxPrimary1" style="font-weight: normal;">Exibir somente alterados</label>
                    </div-->
                    {%IW_CHKALTERADOS%}
                    <!--div class="custom-control custom-checkbox">                      
                      <input type="checkbox" name="terms" class="custom-control-input" id="ckhAlterados">
                      <label class="custom-control-label" style="padding-top:5px; font-weight:normal" for="ckhAlterados">Exibir somente alterados</label> 
                    </div-->

                  </div>          

                </div>
                <div class="card-body" id="here">  


                  
                    
                  
                        
                    
					<!--div class="box-tools flex pull-right inline" > 
                        <div class="input-group" style="width: 100px;">
                            {%IWBUSCARG%}
                        </div>	
                        <div class="input-group" style="width: 150px;">
                            {%IWBUSCAR%}
                            <div class="input-group-btn">
                                <button id="btnBuscar" class="btn btn-sm btn-default" onclick="javascript:fncExecutar('Busca', 'reload');"><i class="fa fa-search"></i></button>
                            </div>
                        </div>
                    </div-->                    



                    
                    <!--div class="table-responsive" style="width: 100%;"-->
                      <!-- {%IWT_DATATABLE%} -->
                      {%IWT_DATATABLE%}
                      <!--table id="DTB_TAG1" class="table table-bordered table-striped table-hover reservation__fontcolor"-->     
                    
                    <!--/div-->   
                                  
                    
                </div> <!-- /.card-body -->                
            </div><!-- /.card -->              
        </div><!-- /.col -->            
    </div><!-- /.row -->
          





  
    
    <div id="main">    
        <button id="previousBtn" onclick="fncExecutar('FRM_PROCESSA', 0)"> Voltar </button>
        <button id="nextBtn"     onclick="fncExecutar('FRM_PREVIA', 0)"> Avançar </button>
    </div>    

        
               
               
    <a href="#" data-toggle="modal" data-target="#modal1"> modal </a>  
    <!--a href="#" data-toggle="Faturamento" data-target="#modalFAT"> Faturamento </a-->  
    {%IWT_MODAL_HIST%}



  


     <!-- Modal Historico modal-lg -->                                                                                     
  <div class="modal fade" id="modal1" tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="static"> 
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document" >    
    <div class="modal-content">                                                                                         
      <div class="modal-header"> <h4 class="modal-title">Historico Aliquota</h4> </div>                                 
      <div class="modal-body" >                                                                                         
         <div class="container-fluid">                                                                                   
            <div class="row">                                                                                             
                    <div class="col-xs-12">                                                                                     
                        <div class="form-group">                                                                                  
                              <label for="prod">Produto: JGQ</label> <br/>                                                     
                              <label for="datin">Data Inicial: 05/04/2021</label> <br/>                                            
                              <label for="datfi">Data Final: 31/12/2021</label> <br/>                                              
                        </div>                                                                                                    
                    </div>                                                                                                      
            </div>                                                                                                        
            <div class="row">                                                                                             
                <div class="col-xs-12">                                                                                     
                    <br />                                                                                                    
                    <!--div class="table-responsive"--> 
             
                        
                    
                         ---------------------------------------------------------------------------------------------------   
                         <!--table id="example2" class="table table-bordered table-striped table-hover">
                            <thead>
                                <tr>
                                <th>Rendering engine</th>
                                <th>Browser</th>
                                <th>Platform(s)</th>
                                <th>Engine version</th>
                                <th>CSS grade</th>
                                </tr>
                            </thead>
                            <tbody>
                            <tr>
                              <td>Trident</td>
                              <td>Internet
                                Explorer 4.0
                              </td>
                              <td>Win 95+</td>
                              <td> 4</td>
                              <td>X</td>
                            </tr>
                            <tr>
                              <td>Trident</td>
                              <td>Internet
                                Explorer 5.0
                              </td>
                              <td>Win 95+</td>
                              <td>5</td>
                              <td>C</td>
                            </tr>
                            <tr>
                              <td>Trident</td>
                              <td>Internet
                                Explorer 5.5
                              </td>
                              <td>Win 95+</td>
                              <td>5.5</td>
                              <td>A</td>
                            </tr>
                        </tbody> 
                        </table-->

                          <img src="../wwwroot/negocio/modal_fat.PNG">  
                        <!--table id="GRID1" class="table table-bordered table-striped table-hover reservation__fontcolor fitPad1">     
                            <thead> 
                                <tr> 
                                    <th colspan="2" rowspan="2" style="text-align: center; vertical-align: middle;">VIGENCIA</th>                                     
                                    <th colspan="31" style="text-align: center;">PREÇOS POR ALIQUOTA</th> 
                                </tr> 
                                <tr> 
                                    <th colspan="9" style="text-align: center;">12</th> 
                                    <th colspan="1" style="text-align: center;">15</th> 
                                    <th colspan="5" style="text-align: center;">17</th> 
                                    <th colspan="3" style="text-align: center;">17.5</th> 
                                    <th colspan="7" style="text-align: center;">18</th> 
                                    <th colspan="5" style="text-align: center;">25</th> 
                                    <th colspan="1" style="text-align: center;">27</th> 
                                </tr> 
                                <tr> 
                                    <th>DT. INÍCIO</th> 
                                    <th>DT. FIM</th> 
                                    <th style="text-align: center;">K </th> 
                                    <th style="text-align: center;">L </th> 
                                    <th style="text-align: center;">M </th> 
                                    <th style="text-align: center;">N </th> 
                                    <th style="text-align: center;">1 </th> 
                                    <th style="text-align: center;">2 </th> 
                                    <th style="text-align: center;">3 </th> 
                                    <th style="text-align: center;">7 </th> 
                                    <th style="text-align: center;">9 </th> 
                                    <th style="text-align: center;">7 </th> 
                                    <th style="text-align: center;">1 </th> 
                                    <th style="text-align: center;">2 </th> 
                                    <th style="text-align: center;">3 </th> 
                                    <th style="text-align: center;">7 </th> 
                                    <th style="text-align: center;">9 </th> 
                                    <th style="text-align: center;">2 </th> 
                                    <th style="text-align: center;">3 </th> 
                                    <th style="text-align: center;">7 </th> 
                                    <th style="text-align: center;">K </th> 
                                    <th style="text-align: center;">N </th> 
                                    <th style="text-align: center;">1 </th> 
                                    <th style="text-align: center;">3 </th> 
                                    <th style="text-align: center;">7 </th> 
                                    <th style="text-align: center;">8 </th> 
                                    <th style="text-align: center;">9 </th> 
                                    <th style="text-align: center;">K </th> 
                                    <th style="text-align: center;">1 </th> 
                                    <th style="text-align: center;">2 </th> 
                                    <th style="text-align: center;">3 </th> 
                                    <th style="text-align: center;">7 </th> 
                                    <th style="text-align: center;">K </th> 
                                </tr> 
                            </thead>
                            <tbody> 
                                <tr > 
                                <td> 22/02/2021 </td> 
                                <td> 21/03/2021 </td> 
                                <td> 0 </td> 
                                <td> 61.214 </td> 
                                <td> 0 </td> 
                                <td> 0 </td> 
                                <td> 60.530 </td> 
                                <td> 60.530 </td> 
                                <td> 61.214 </td> 
                                <td> 54.428 </td> 
                                <td id="fitPad"> 0 </td> 
                                <td id="fitPad"> 0 </td> 
                                <td id="fitPad"> 60.530 </td> 
                                <td id="fitPad"> 60.530 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 54.428 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 60.530 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 54.428 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 60.530 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 54.428 </td> 
                                <td id="fitPad"> 55.043 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 60.530 </td> 
                                <td id="fitPad"> 60.530 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                <td id="fitPad"> 54.428 </td> 
                                <td id="fitPad"> 61.214 </td> 
                                </tr> 


                        </table-->                           


                    
                </div>                                                                                                      
            </div>                                                                                                        
        </div>                                                                                                          
     </div> 

     <div class="modal-footer">                                                                                        
       <button type="button" class="btn btn-default"  data-dismiss="modal" id="BTNCANCELAR">Cancelar</button>          
     </div>                                                                                                            
   </div>                                                                                                              
    </div>                                                                                                                
 </div>                                                                                                                




<!-- Modal Historico modal-lg -->                                                                                     
<div class="modal fade" id="modalFAT" tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="static"> 
<div class="modal-dialog modal-dialog-centered modal-xl" role="document" >    
    <div class="modal-content">                                                                                         
    <div class="modal-header"> <h4 class="modal-title">Faturamento Produto "JME" 01/03/2021 a 31/03/2021 </h4> </div>                                 
    <div class="modal-body" >                                                                                         
        <div class="container-fluid">                                                                                   
            <div class="row">                                                                                             
                    <div class="col-xs-12">                                                                                     
                        <div class="form-group">                                                                                  
                            <label for="prod">Produto: JGQ</label> <br/>                                                     
                            <label for="datin">Data Inicial: 05/04/2021</label> <br/>                                            
                            <label for="datfi">Data Final: 31/12/2021</label> <br/>                                              
                        </div>                                                                                                    
                    </div>                                                                                                      
            </div>                                                                                                        
            <div class="row">                                                                                             
                <div class="col-xs-12">                                                                                     
                    <br />   
                    <!--img src="../wwwroot/negocio/modal_fat.PNG"-->
                </div>                                                                                                      
            </div>                                                                                                        
        </div>                                                                                                          
    </div> 
    <div class="modal-footer">                                                                                        
        <button type="button" class="btn btn-default"  data-dismiss="modal" id="BTNCANCELAR">Cancelar</button>          
    </div>                                                                                                            
    </div>                                                                                                              
    </div>                                                                                                                
</div>  



    
    <!--script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"> </script-->
    <!--script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"> </script-->

    <!-- DataTables  & Plugins -->
    <!--script src="../wwwroot/MatAdmLTE/plugins/jquery/jquery.min.js"></script-->
    <script src="../wwwroot/MatAdmLTE/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/jszip/jszip.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/pdfmake/pdfmake.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/pdfmake/vfs_fonts.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="../wwwroot/MatAdmLTE/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>

    

    


    <!--script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script-->
    <!--script src="../wwwroot/marcio/bower_components/fastclick/lib/fastclick.js"></script>
    <script src="../wwwroot/marcio/dist/js/adminlte.min.js"></script>
    <script src="../wwwroot/marcio/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
    <script src="../wwwroot/marcio/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="../wwwroot/marcio/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="../wwwroot/marcio/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script-->
    <!--script src="bower_components/Chart.js/Chart.js"></script-->
    <!--script src="bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>	
    <script src="bower_components/datatables.net-bs/js/dataTables.select.min.js"></script>	
	<script src="bower_components/datatables.net-bs/js/jquery.dataTables.min.js"></script-->	
    <!--script src="../wwwroot/marcio/plugins/input-mask/jquery.inputmask.js"></script>
    <script src="../wwwroot/marcio/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="../wwwroot/marcio/plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="../wwwroot/marcio/bower_components/moment/min/moment.min.js"></script>
    <script src="../wwwroot/marcio/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="../wwwroot/marcio/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="../wwwroot/marcio/bower_components/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
    <script src="../wwwroot/marcio/plugins/timepicker/bootstrap-timepicker.min.js"></script-->
     







    {%Step_ProgressBar_SCRIPT%}
    <script>



    /*$(document).ready( function () {        
        alert("read function!!");        
        loadDataTable();
    });*/


    loadDataTable();

    
    function reloadDataTable(){
        //debugger;  
        //alert("reload datatable");
               
        //Destroy table
        table.destroy(); //$('#DTB_TAG').DataTable().destroy();                        
        
        //Relaad TAG
        $( "#here" ).load(window.location.href + " #here" );            
        
        //Reload DataTable
        loadDataTable();                            
        
    };

    

    function loadDataTable(){

        alert("load datatable");

                

        var table = 
        $("#DTB_TAG").DataTable(
            {
                //"responsive": true, "lengthChange": false, "autoWidth": false, "ordering": false,
                "lengthChange": false, "autoWidth": false, "ordering": false,
                "buttons": ["copy", "csv", "excel", "pdf", "print"],//, "colvis"]
                "language" : {
                    "sSearch": "Pesquisar",
                    "sLengthMenu": "_MENU_ resultados por página"        
            }
      
         }      
        );//.buttons().container().appendTo('#DTB_TAG_wrapper .col-md-6:eq(0)');    

        

        //table.on( 'draw', function () {
        //    alert( 'Table redrawn' );
        //} );


        
        
        //table.draw(false);
        //table.rowReorder;
       //table.redraw();

        //$("#DTB_TAG").DataTable().ajax.reload();

        //table.ajax.reload();
    };








    function fncExecutar(Acao, id){
      debugger;
      alert("call Delphi");
      ajaxCall("prc_Acao", "Params=p1=" + Acao + ",p2=" + id + "");
    };


    var chkbox = $("#ckhAlterados");

    chkbox.click(function(){
      debugger;
      if($(this).is(":checked")){
          //alert("foi checado");
          fncExecutar('filtraConsolidacao', 'alterados');
          reloadDataTable();
          //reloadDataTable();         
      }else{
          //alert("foi deschecado");
          fncExecutar('filtraConsolidacao', 'todos');
          reloadDataTable();         
          //table.ajax.reload();
      }

      //{ document.location.reload(true) }; 
    });

    //chkbox.trigger("click");

















   $('.mydatatable').DataTable().destroy();        
    $('.mydatatable').DataTable( {                        
            "sorting": false
    } );
    var table = $('.mydatatable').DataTable( {                        
            "sorting": false
    } );



</script>
    
</body>
</html>



